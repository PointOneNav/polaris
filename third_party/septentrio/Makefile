#
# Makefile to rebuild the "sbf2asc" tool
#
#
# Septentrio grants permission to use, copy, modify, and/or distribute
# this software for any purpose with or without fee.  
#
# THE SOFTWARE IS PROVIDED "AS IS" AND SEPTENTRIO DISCLAIMS ALL
# WARRANTIES WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED
# WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL
# SEPTENTRIO BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR
# CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS
# OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT,
# NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN
# CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.


# $(CC) should be your C++ compiler, for instance:
# CC	= gcc

# On some platform (Cygwin + GCC 3.2, i.e.), doubles are aligned on an
# 8 bytes boundary by default. The GCC i386 "-mno-align-double" option
# packs the structure and makes it binary compatible with SBF data
# generated by the receivers.
CFLAGS	= -O -mno-align-double -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -DNO_DECRYPTION

LDFLAGS = -lm 

COMMON_OBJS	= sbfread.o sbfread_meas.o sbfsvid.o ssngetop.o crc.o
ALL_OBJS	= sbf2asc.o $(COMMON_OBJS)

sbf2asc : sbf2asc.o $(COMMON_OBJS)
	$(CC) $^ -o $@ $(LDFLAGS)

%.o	: %.c
	$(CC) -c $(CFLAGS) -o $@ $<

clean	:
	rm sbf2asc $(ALL_OBJS) 

# Source dependencies:

sbf2asc.o         : sbf2asc.c ssngetop.h sbfread.h measepoch.h measepochconfig.h sviddef.h sbfsvid.h ssntypes.h sbfdef.h sbfsigtypes.h sbf2asc_version.h

sbfread.o         : sbfread.c sbfread.h crc.h ssntypes.h sbfdef.h sbfsigtypes.h

sbfread_meas.o    : sbfread_meas.c sbfread.h measepoch.h measepochconfig.h sviddef.h sbfsvid.h crc.h ssntypes.h sbfdef.h sbfsigtypes.h

ssngetop.o        : ssngetop.c ssngetop.h

crc.o             : crc.c crc.h ssntypes.h sbfdef.h

# End of Makefile
